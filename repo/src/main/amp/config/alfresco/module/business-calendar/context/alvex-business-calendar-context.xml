<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE beans PUBLIC '-//SPRING//DTD BEAN//EN' 'http://www.springframework.org/dtd/spring-beans.dtd'>
<!--suppress SpringFacetInspection -->
<beans>
    <bean id="alvexBusinessCalendar" parent="alvex-key-value-store-aware" class="com.alvexcore.repo.bcal.BusinessCalendar"/>

    <bean id="alvexBusinessCalendarAbstractHandler" abstract="true">
        <property name="serviceRegistry" ref="ServiceRegistry"/>
        <property name="repositoryService" ref="activitiRepositoryService"/>
        <property name="businessCalendar" ref="alvexBusinessCalendar"/>
        <property name="dueDateSetter" ref="alvexBusinessCalendarDueDateSetter" />
    </bean>

    <!-- This is an example of how custom handler may be configured


    <bean id="businessCalendarCustomHandler" class="com.alvexcore.repo.bcal.CustomBusinessCalendarHandler" parent="alvexBusinessCalendarAbstractHandler">
        <property name="businessCalendarPath" value="${alvex.bcal.path}" />
        <property name="matches">
            <list>
                <value>workflow1</value>
                <value>workflow2</value>
            </list>
        </property>
    </bean>

    -->
    
    <bean id="alvexBusinessCalendarDefaultHandler" class="com.alvexcore.repo.bcal.DefaultBusinessCalendarHandler" parent="alvexBusinessCalendarAbstractHandler">
        <property name="businessCalendarPath" value="${alvex.bcal.path}" />
        <property name="matches">
            <list>
                <value>.*</value>
            </list>
        </property>
    </bean>

    <bean id="alvexBusinessCalendarDueDateSetter" class="com.alvexcore.repo.bcal.TaskDueDateSetter" parent="alvex-activiti-connector-activiti-listener">
        <property name="businessCalendar" ref="alvexBusinessCalendar"/>
        <property name="matches">
            <list>
                <!-- Intentionally left empty -->
            </list>
        </property>
    </bean>

    <bean id='webscript.com.alvexcore.duedates.limits.get' class='com.alvexcore.repo.bcal.webscript.ListLimits'>
        <property name="serviceRegistry" ref="ServiceRegistry" />
        <property name="businessCalendar" ref="alvexBusinessCalendar"/>
    </bean>

    <bean id='webscript.com.alvexcore.duedates.limit.put' class='com.alvexcore.repo.bcal.webscript.SetLimit'>
        <property name="businessCalendar" ref="alvexBusinessCalendar"/>
    </bean>

    <bean id="alvex-bcal" parent="alvex-extension" class="com.alvexcore.repo.BusinessCalendarExtension"/>

</beans>
